#!/usr/bin/env sh

# Exit on error
set -e

echo "Running pre-commit checks..."
echo "ğŸ”§ Auto-fixing code issues..."
pnpm format

echo "ğŸ“ Adding formatted files to git..."
git add .

echo "ğŸ” Final code check..."
pnpm check || {
  echo "âŒ Code issues found that cannot be auto-fixed. Please review and fix manually:"
  echo "   Run 'pnpm check' to see the issues"
  echo "   Run 'pnpm format' to auto-fix formatting issues"
  exit 1
}

echo "âœ… All pre-commit checks passed!"